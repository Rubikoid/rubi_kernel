CMAKE_MINIMUM_REQUIRED(VERSION 3.13)

project(rubiKernel C CXX ASM)
# enable_language(ASM-ATT)

# set(PREFIX "$ENV{HOME}/gcc_cross/opt")
# set(CMAKE_C_COMPILER "${PREFIX}/bin/i686-elf-gcc")
# set(CMAKE_ASM_COMPILER "${PREFIX}/bin/i686-elf-gcc")
# set(CMAKE_CXX_COMPILER "${PREFIX}/bin/i686-elf-g++")

add_executable(kernel "kernel/kernel.c" "loader/start.s")
target_compile_options(kernel PRIVATE -std=gnu99 -ffreestanding -g)
target_link_options(kernel PRIVATE -ffreestanding -nostdlib -g -lgcc -T ${CMAKE_SOURCE_DIR}/loader/linker.ld)
